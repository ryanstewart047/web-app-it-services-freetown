<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Support - IT Services Freetown</title>
    <link href="assets/css/output.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/png" sizes="52x52" href="assets/favicon-52x52.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16x16.png">
    <link rel="shortcut icon" href="favicon.ico">
    
    <style>
        .btn-primary {
            background: linear-gradient(135deg, #040e40 0%, #040e40 100%);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 500;
            transition: all 0.2s;
            border: none;
            cursor: pointer;
        }
        .btn-primary:hover {
            background: linear-gradient(135deg, #040e40 0%, #040e40 100%);
        }
        .btn-secondary {
            background: linear-gradient(135deg, #ff0000 0%, #ff0000 100%);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 500;
            transition: all 0.2s;
            border: none;
            cursor: pointer;
        }
        .btn-secondary:hover {
            background: linear-gradient(135deg, #ff0000 0%, #ff0000 100%);
        }
        .input-field {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            outline: none;
            transition: all 0.2s;
        }
        .input-field:focus {
            border-color: #040e40;
            box-shadow: 0 0 0 3px rgba(4, 14, 64, 0.1);
        }
        .chat-container {
            height: 400px;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.75rem;
            display: flex;
            flex-direction: column;
        }
        @media (min-width: 768px) {
            .chat-container {
                height: 500px;
            }
        }
        .chat-header {
            background: linear-gradient(135deg, #040e40 0%, #1c1891 100%);
            color: white;
            padding: 1rem;
            border-radius: 0.75rem 0.75rem 0 0;
            display: flex;
            align-items: center;
            justify-content: between;
        }
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .chat-input-area {
            border-top: 1px solid #e5e7eb;
            padding: 1rem;
            display: flex;
            gap: 0.75rem;
            align-items: end;
        }
        .message {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            max-width: 80%;
        }
        .message.user {
            align-self: flex-end;
            flex-direction: row-reverse;
        }
        .message.ai {
            align-self: flex-start;
        }
        .message.agent {
            align-self: flex-start;
        }
        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        .message.user .message-avatar {
            background: #040e40;
            color: white;
        }
        .message.ai .message-avatar {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
        }
        .message.agent .message-avatar {
            background: #22c55e;
            color: white;
        }
        .message-content {
            background: #f3f4f6;
            padding: 0.75rem 1rem;
            border-radius: 1rem;
            max-width: 100%;
        }
        .message.user .message-content {
            background: #040e40;
            color: white;
        }
        .message.ai .message-content {
            background: #dbeafe;
            border: 1px solid #93c5fd;
        }
        .message.agent .message-content {
            background: #dcfce7;
            border: 1px solid #86efac;
        }
        .typing-indicator {
            display: none;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem 0;
            opacity: 0.7;
        }
        .typing-dots {
            display: flex;
            gap: 0.25rem;
        }
        .typing-dot {
            width: 8px;
            height: 8px;
            background: #6b7280;
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        .typing-dot:nth-child(3) { animation-delay: 0s; }
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0); opacity: 0.5; }
            40% { transform: scale(1); opacity: 1; }
        }
        .quick-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        .quick-action {
            background: #f3f4f6;
            border: 1px solid #d1d5db;
            padding: 0.5rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        .quick-action:hover {
            background: #040e40;
            color: white;
            border-color: #040e40;
        }
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-left: auto;
        }
        .status-online { background: #22c55e; }
        .status-busy { background: #f59e0b; }
        .status-offline { background: #ef4444; }
        
        /* Header Background Slideshow */
        .hero-section {
            position: relative;
            overflow: hidden;
            background: linear-gradient(135deg, #040e40 0%, #1c1891 100%);
            min-height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .background-slideshow {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        
        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 2s ease-in-out;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
        
        .slide.active {
            opacity: 0.3;
        }
        
        .slide-1 {
            background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwMCIgaGVpZ2h0PSI0MDAiIHZpZXdCb3g9IjAgMCAxMjAwIDQwMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGRlZnM+CjxsaW5lYXJHcmFkaWVudCBpZD0iZ3JhZGllbnQxIiB4MT0iMCUiIHkxPSIwJSIgeDI9IjEwMCUiIHkyPSIxMDAlIj4KPHN0b3Agb2Zmc2V0PSIwJSIgc3R5bGU9InN0b3AtY29sb3I6IzQzOGVmZjtzdG9wLW9wYWNpdHk6MC4yIiAvPgo8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiM4YjVjZjY7c3RvcC1vcGFjaXR5OjAuMSIgLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8cmVjdCB3aWR0aD0iMTIwMCIgaGVpZ2h0PSI0MDAiIGZpbGw9InVybCgjZ3JhZGllbnQxKSIvPgo8IS0tIEFmcmljYW4gVGVjaG5pY2lhbiAtLT4KPHN2ZyB4PSIyMDAiIHk9IjgwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjI0MCI+CjwhLS0gSGVhZCBhbmQgU2hvdWxkZXJzIC0tPgo8Y2lyY2xlIGN4PSIxMDAiIGN5PSI4MCIgcj0iMzAiIGZpbGw9IiM4YjQ1MTMiIG9wYWNpdHk9IjAuNiIvPgo8cGF0aCBkPSJNNzAgMTAwIEwxMzAgMTAwIEwxMjAgMTgwIEw4MDE4MFoiIGZpbGw9IiMzYjgyZjYiIG9wYWNpdHk9IjAuNSIvPgo8IS0tIEFybXMgd2l0aCBSZXBhaXIgQWN0aW9uIC0tPgo8bGluZSB4MT0iODAiIHkxPSIxMjAiIHgyPSI2MCIgeTI9IjE1MCIgc3Ryb2tlPSIjOGI0NTEzIiBzdHJva2Utd2lkdGg9IjgiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgb3BhY2l0eT0iMC42Ii8+CjxsaW5lIHgxPSIxMjAiIHkxPSIxMjAiIHgyPSIxNDAiIHkyPSIxNTAiIHN0cm9rZT0iIzhiNDUxMyIgc3Ryb2tlLXdpZHRoPSI4IiBzdHJva2UtbGluZWNhcD0icm91bmQiIG9wYWNpdHk9IjAuNiIvPgo8L3N2Zz4KPCEtLSBNb2JpbGUgUGhvbmUgUmVwYWlyIC0tPgo8c3ZnIHg9IjUwMCIgeT0iMTIwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjE2MCI+CjxyZWN0IHg9IjcwIiB5PSIyMCIgd2lkdGg9IjYwIiBoZWlnaHQ9IjEwMCIgcng9IjEwIiBmaWxsPSIjMWYyOTM3IiBvcGFjaXR5PSIwLjciLz4KPHJlY3QgeD0iNzUiIHk9IjMwIiB3aWR0aD0iNTAiIGhlaWdodD0iNjAiIGZpbGw9IiMzYjgyZjYiIG9wYWNpdHk9IjAuNSIvPgo8IS0tIENyYWNrZWQgU2NyZWVuIC0tPgo8cGF0aCBkPSJNODAgNDBMOTAgNjBMMTEwIDUwTDEyMCA3MEwxMTUgODAiIHN0cm9rZT0iI2VmNDQ0NCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIiBvcGFjaXR5PSIwLjciLz4KPCEtLSBSZXBhaXIgVG9vbHMgLS0+CjxyZWN0IHg9IjQwIiB5PSI4MCIgd2lkdGg9IjQiIGhlaWdodD0iNDAiIGZpbGw9IiNmZjk5MDAiIG9wYWNpdHk9IjAuOCIvPgo8Y2lyY2xlIGN4PSI0MiIgY3k9Ijc4IiByPSIzIiBmaWxsPSIjZmY5OTAwIiBvcGFjaXR5PSIwLjgiLz4KPHJlY3QgeD0iMTUwIiB5PSI5MCIgd2lkdGg9IjIwIiBoZWlnaHQ9IjQiIGZpbGw9IiNlZjQ0NDQiIG9wYWNpdHk9IjAuOCIvPgo8L3N2Zz4KPCEtLSBDaXJjdWl0IEJvYXJkIFBhdHRlcm4gLS0+CjxzdmcgeD0iODAwIiB5PSIxMDAiIHdpZHRoPSIzMDAiIGhlaWdodD0iMjAwIj4KPGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iNCIgZmlsbD0iIzEwYjk4MSIgb3BhY2l0eT0iMC42Ii8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjMwIiByPSIzIiBmaWxsPSIjZmY5OTAwIiBvcGFjaXR5PSIwLjYiLz4KPGNpcmNsZSBjeD0iMTUwIiBjeT0iNzAiIHI9IjUiIGZpbGw9IiNlZjQ0NDQiIG9wYWNpdHk9IjAuNiIvPgo8bGluZSB4MT0iNTAiIHkxPSI1MCIgeDI9IjEwMCIgeTI9IjMwIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMSIgb3BhY2l0eT0iMC40Ii8+CjxsaW5lIHgxPSIxMDAiIHkxPSIzMCIgeDI9IjE1MCIgeTI9IjcwIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMSIgb3BhY2l0eT0iMC40Ii8+Cjwvc3ZnPgo8L3N2Zz4K');
        }
        
        .slide-2 {
            background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwMCIgaGVpZ2h0PSI0MDAiIHZpZXdCb3g9IjAgMCAxMjAwIDQwMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGRlZnM+CjxsaW5lYXJHcmFkaWVudCBpZD0iZ3JhZGllbnQyIiB4MT0iMCUiIHkxPSIwJSIgeDI9IjEwMCUiIHkyPSIxMDAlIj4KPHN0b3Agb2Zmc2V0PSIwJSIgc3R5bGU9InN0b3AtY29sb3I6IzEwYjk4MTtzdG9wLW9wYWNpdHk6MC4yIiAvPgo8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiMzYjgyZjY7c3RvcC1vcGFjaXR5OjAuMSIgLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8cmVjdCB3aWR0aD0iMTIwMCIgaGVpZ2h0PSI0MDAiIGZpbGw9InVybCgjZ3JhZGllbnQyKSIvPgo8IS0tIFJlcGFpciBXb3Jrc3RhdGlvbiAtLT4KPHN2ZyB4PSIxNTAiIHk9IjEwMCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIyMDAiPgo8IS0tIERlc2sgLS0+CjxyZWN0IHg9IjIwIiB5PSIxNDAiIHdpZHRoPSIyNjAiIGhlaWdodD0iNDAiIGZpbGw9IiM2YjczODAiIG9wYWNpdHk9IjAuNiIvPgo8IS0tIE1vYmlsZSBQaG9uZXMgb24gRGVzayAtLT4KPHJlY3QgeD0iNDAiIHk9IjEyMCIgd2lkdGg9IjMwIiBoZWlnaHQ9IjIwIiByeD0iMyIgZmlsbD0iIzFmMjkzNyIgb3BhY2l0eT0iMC44Ii8+CjxyZWN0IHg9IjkwIiB5PSIxMTUiIHdpZHRoPSIzNSIgaGVpZ2h0PSIyNSIgcng9IjQiIGZpbGw9IiNmZmZmZmYiIG9wYWNpdHk9IjAuNyIvPgo8cmVjdCB4PSIxNDAiIHk9IjEyNSIgd2lkdGg9IjI4IiBoZWlnaHQ9IjE1IiByeD0iMyIgZmlsbD0iIzEwYjk4MSIgb3BhY2l0eT0iMC44Ii8+CjwhLS0gUmVwYWlyIFRvb2xzIC0tPgo8bGluZSB4MT0iMTkwIiB5MT0iMTMwIiB4Mj0iMjEwIiB5Mj0iMTMwIiBzdHJva2U9IiNmZjk5MDAiIHN0cm9rZS13aWR0aD0iMyIgb3BhY2l0eT0iMC44Ii8+CjxjaXJjbGUgY3g9IjIyMCIgY3k9IjEzMCIgcj0iNCIgZmlsbD0iI2ZmOTkwMCIgb3BhY2l0eT0iMC44Ii8+CjxwYXRoIGQ9Ik0yMzAgMTIwIEwyNTAgMTQwIEwyNDUgMTQ1IEwyMjUgMTI1IFoiIGZpbGw9IiNlZjQ0NDQiIG9wYWNpdHk9IjAuOCIvPgo8L3N2Zz4KPCEtLSBDaXJjdWl0IEJvYXJkIERldGFpbCAtLT4KPHN2ZyB4PSI2MDAiIHk9IjgwIiB3aWR0aD0iNDAwIiBoZWlnaHQ9IjI0MCI+CjwhLS0gQ2lyY3VpdCBCb2FyZCBCYXNlIC0tPgo8cmVjdCB4PSI1MCIgeT0iNDAiIHdpZHRoPSIzMDAiIGhlaWdodD0iMTYwIiByeD0iMTAiIGZpbGw9IiMyMmM1NWUiIG9wYWNpdHk9IjAuMyIvPgo8IS0tIENvbXBvbmVudHMgLS0+CjxyZWN0IHg9IjgwIiB5PSI3MCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjIwIiBmaWxsPSIjMWYyOTM3IiBvcGFjaXR5PSIwLjciLz4KPHJlY3QgeD0iMTQwIiB5PSI2MCIgd2lkdGg9IjI1IiBoZWlnaHQ9IjMwIiBmaWxsPSIjZWY0NDQ0IiBvcGFjaXR5PSIwLjciLz4KPGNpcmNsZSBjeD0iMjAwIiBjeT0iMTAwIiByPSIxNSIgZmlsbD0iIzNiODJmNiIgb3BhY2l0eT0iMC42Ii8+CjxyZWN0IHg9IjI1MCIgeT0iMTIwIiB3aWR0aD0iNjAiIGhlaWdodD0iMTUiIGZpbGw9IiNmZjk5MDAiIG9wYWNpdHk9IjAuNyIvPgo8IS0tIENpcmN1aXQgVHJhY2VzIC0tPgo8cGF0aCBkPSJNMTAwIDkwIEwxNDAgOTAgTDE0MCA3NSIgc3Ryb2tlPSIjZmZmZmZmIiBzdHJva2Utd2lkdGg9IjIiIG9wYWNpdHk9IjAuNSIvPgo8cGF0aCBkPSJNMTY1IDc1IEwxODUgNzUgTDE4NSAxMDAiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSIyIiBvcGFjaXR5PSIwLjUiLz4KPC9zdmc+Cjwvc3ZnPgo=');
        }
        
        .slide-3 {
            background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwMCIgaGVpZ2h0PSI0MDAiIHZpZXdCb3g9IjAgMCAxMjAwIDQwMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGRlZnM+CjxsaW5lYXJHcmFkaWVudCBpZD0iZ3JhZGllbnQzIiB4MT0iMCUiIHkxPSIwJSIgeDI9IjEwMCUiIHkyPSIxMDAlIj4KPHN0b3Agb2Zmc2V0PSIwJSIgc3R5bGU9InN0b3AtY29sb3I6I2Y1OWUwYjtzdG9wLW9wYWNpdHk6MC4yIiAvPgo8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNlZjQ0NDQ7c3RvcC1vcGFjaXR5OjAuMSIgLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8cmVjdCB3aWR0aD0iMTIwMCIgaGVpZ2h0PSI0MDAiIGZpbGw9InVybCgjZ3JhZGllbnQzKSIvPgo8IS0tIFRlY2huaWNpYW4gd2l0aCBNYWduaWZ5aW5nIEdsYXNzIC0tPgo8c3ZnIHg9IjIwMCIgeT0iNjAiIHdpZHRoPSIyNTAiIGhlaWdodD0iMjgwIj4KPCEtLSBIZWFkIC0tPgo8Y2lyY2xlIGN4PSIxMjUiIGN5PSI4MCIgcj0iMzUiIGZpbGw9IiM4YjQ1MTMiIG9wYWNpdHk9IjAuNyIvPgo8IS0tIEJvZHkgLS0+CjxwYXRoIGQ9Ik05MCA1MDBMMTYwIDUwTDE1MCAyMDBMODAgMjAwWiIgZmlsbD0iIzNiODJmNiIgb3BhY2l0eT0iMC42Ii8+CjwhLS0gQXJtIHdpdGggTWFnbmlmeWluZyBHbGFzcyAtLT4KPGxpbmUgeDE9IjE2MCIgeTE9IjEyMCIgeDI9IjIwMCIgeTI9IjE2MCIgc3Ryb2tlPSIjOGI0NTEzIiBzdHJva2Utd2lkdGg9IjEwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIG9wYWNpdHk9IjAuNyIvPgo8Y2lyY2xlIGN4PSIyMDAiIGN5PSIxNjAiIHI9IjI1IiBmaWxsPSJub25lIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iNCIgb3BhY2l0eT0iMC44Ii8+CjxsaW5lIHgxPSIyMTgiIHkxPSIxNzgiIHgyPSIyMzAiIHkyPSIxOTAiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSI0IiBvcGFjaXR5PSIwLjgiLz4KPCEtLSBPdGhlciBBcm0gLS0+CjxsaW5lIHgxPSI5MCIgeTE9IjEyMCIgeDI9IjUwIiB5Mj0iMTYwIiBzdHJva2U9IiM4YjQ1MTMiIHN0cm9rZS13aWR0aD0iMTAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgb3BhY2l0eT0iMC43Ii8+Cjwvc3ZnPgo8IS0tIE1vYmlsZSBQaG9uZSB3aXRoIE9wZW4gQmFjayAtLT4KPHN2ZyB4PSI1NTAiIHk9IjEyMCIgd2lkdGg9IjIwMCIgaGVpZ2h0PSIxNjAiPgo8IS0tIFBob25lIEJvZHkgLS0+CjxyZWN0IHg9IjcwIiB5PSIyMCIgd2lkdGg9IjYwIiBoZWlnaHQ9IjEwMCIgcng9IjEwIiBmaWxsPSIjMWYyOTM3IiBvcGFjaXR5PSIwLjgiLz4KPCEtLSBPcGVuIEJhY2sgUGFuZWwgLS0+CjxyZWN0IHg9IjY1IiB5PSIyNSIgd2lkdGg9IjcwIiBoZWlnaHQ9IjkwIiByeD0iOCIgZmlsbD0iIzIyYzU1ZSIgb3BhY2l0eT0iMC42Ii8+CjwhLS0gQ2lyY3VpdCBDb21wb25lbnRzIC0tPgo8cmVjdCB4PSI3NSIgeT0iMzUiIHdpZHRoPSIyMCIgaGVpZ2h0PSIxMCIgZmlsbD0iI2VmNDQ0NCIgb3BhY2l0eT0iMC44Ii8+CjxyZWN0IHg9IjEwNSIgeT0iNDAiIHdpZHRoPSIxNSIgaGVpZ2h0PSIxNSIgZmlsbD0iIzNiODJmNiIgb3BhY2l0eT0iMC44Ii8+CjxjaXJjbGUgY3g9IjkwIiBjeT0iNzAiIHI9IjgiIGZpbGw9IiNmZjk5MDAiIG9wYWNpdHk9IjAuOCIvPgo8Y2lyY2xlIGN4PSIxMTAiIGN5PSI4MCIgcj0iNSIgZmlsbD0iIzEwYjk4MSIgb3BhY2l0eT0iMC44Ii8+CjwhLS0gQ2lyY3VpdCBUcmFjZXMgLS0+CjxwYXRoIGQ9Ik04NSA0NSBMOTUgNDUgTDk1IDYwIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMSIgb3BhY2l0eT0iMC42Ii8+CjxwYXRoIGQ9Ik0xMDUgNTUgTDExNSA1NSBMMTE1IDc1IiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMSIgb3BhY2l0eT0iMC42Ii8+Cjwvc3ZnPgo8IS0tIFJlcGFpciBUb29scyBTZXQgLS0+CjxzdmcgeD0iODUwIiB5PSIxMDAiIHdpZHRoPSIyNTAiIGhlaWdodD0iMjAwIj4KPCEtLSBTY3Jld2RyaXZlcnMgLS0+CjxyZWN0IHg9IjMwIiB5PSI1MCIgd2lkdGg9IjQiIGhlaWdodD0iODAiIGZpbGw9IiNmZjk5MDAiIG9wYWNpdHk9IjAuOSIvPgo8Y2lyY2xlIGN4PSIzMiIgY3k9IjQ4IiByPSI0IiBmaWxsPSIjZmY5OTAwIiBvcGFjaXR5PSIwLjkiLz4KPHJlY3QgeD0iNTAiIHk9IjYwIiB3aWR0aD0iNCIgaGVpZ2h0PSI3MCIgZmlsbD0iI2VmNDQ0NCIgb3BhY2l0eT0iMC45Ii8+CjxjaXJjbGUgY3g9IjUyIiBjeT0iNTgiIHI9IjQiIGZpbGw9IiNlZjQ0NDQiIG9wYWNpdHk9IjAuOSIvPgo8IS0tIFR3ZWV6ZXJzIC0tPgo8cGF0aCBkPSJNODAgNTAgTDkwIDUwIEw4NSA5MEw4MCA5MFoiIGZpbGw9IiNmZmZmZmYiIG9wYWNpdHk9IjAuOCIvPgo8IS0tIFNwdWRnZXIgLS0+CjxwYXRoIGQ9Ik0xMjAgNjAgTDE0MCA4MCBMMTM1IDg1IEwxMTUgNjUgWiIgZmlsbD0iIzEwYjk4MSIgb3BhY2l0eT0iMC44Ii8+Cjwvc3ZnPgo8L3N2Zz4K');
        }
        
        .hero-content {
            position: relative;
            z-index: 2;
            text-align: center;
            color: white;
            max-width: 800px;
            padding: 2rem;
        }
        
        .hero-content h1 {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 1rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .hero-content p {
            font-size: 1.25rem;
            opacity: 0.9;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }
        
        @media (max-width: 768px) {
            .hero-content h1 {
                font-size: 2rem;
            }
            .hero-content p {
                font-size: 1rem;
            }
            .hero-section {
                min-height: 250px;
            }
        }
        
        /* Enhanced loading overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #f0f4ff 0%, #e0e7ff 25%, #f8fafc 50%, #fff1f2 75%, #fef7f7 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease-out;
        }
        
        .loading-overlay::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(4,14,64,0.03)" stroke-width="1"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            opacity: 0.5;
        }
        
        .loading-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 2rem;
            padding: 3rem 2rem;
            text-align: center;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            z-index: 2;
        }
        
        .loading-spinner {
            width: 80px;
            height: 80px;
            margin: 0 auto 1.5rem;
            position: relative;
        }
        
        .loading-spinner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 4px solid transparent;
            border-top: 4px solid #040e40;
            border-right: 4px solid #1c1891;
            border-radius: 50%;
            animation: spin 1.5s linear infinite;
        }
        
        .loading-spinner::after {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            width: calc(100% - 20px);
            height: calc(100% - 20px);
            border: 3px solid transparent;
            border-top: 3px solid #ff0000;
            border-radius: 50%;
            animation: spin 1s linear infinite reverse;
        }
        
        .loading-dots {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            margin-top: 1rem;
        }
        
        .loading-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: linear-gradient(135deg, #040e40, #ff0000);
            animation: bounce 1.4s ease-in-out infinite both;
        }
        
        .loading-dot:nth-child(1) { animation-delay: -0.32s; }
        .loading-dot:nth-child(2) { animation-delay: -0.16s; }
        .loading-dot:nth-child(3) { animation-delay: 0s; }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes bounce {
            0%, 80%, 100% {
                transform: scale(0.8);
                opacity: 0.5;
            }
            40% {
                transform: scale(1.2);
                opacity: 1;
            }
        }
        
        .fade-out {
            opacity: 0;
            pointer-events: none;
        }
        
        /* Smooth scrollbar - branded thumb */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #040e40, #ff0000);
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #040e40, #ff0000);
        }
        
        /* Mobile menu icon visibility fix */
        #menu-icon {
            display: block !important;
        }
        
        #close-icon {
            display: none !important;
        }
        
        #close-icon.show {
            display: block !important;
        }
        
        #menu-icon.hide {
            display: none !important;
        }
        
        /* Notification Banner Styles */
        .notification-banner {
            background: linear-gradient(135deg, #ff8c00 0%, #ff6b00 50%, #ff8c00 100%);
            color: white;
            padding: 0.75rem 0;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 9999;
            box-shadow: 0 2px 10px rgba(255, 140, 0, 0.3);
            overflow: hidden;
            border-bottom: 2px solid #ff6b00;
        }
        
        .notification-content {
            white-space: nowrap;
            animation: scrollText 30s linear infinite;
            display: inline-block;
            font-weight: 600;
            font-size: 0.95rem;
            padding-left: 100%;
        }
        
        @keyframes scrollText {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(-100%);
            }
        }
        
        .notification-banner:hover .notification-content {
            animation-play-state: paused;
        }
        
        .banner-icon {
            margin-right: 0.5rem;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.8;
                transform: scale(1.1);
            }
        }
        
        /* Adjust body padding to account for fixed banner */
        body {
            padding-top: 3rem;
        }
        
        /* Ensure navigation is properly positioned after banner */
        nav {
            margin-top: 0;
        }
        
        /* Mobile responsive banner */
        @media (max-width: 768px) {
            .notification-banner {
                padding: 0.5rem 0;
                font-size: 0.85rem;
            }
            
            body {
                padding-top: 2.5rem;
            }
            
            .notification-content {
                animation-duration: 25s;
            }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Notification Banner -->
    <div class="notification-banner">
        <div class="notification-content">
            <i class="fas fa-bullhorn banner-icon"></i>
            🔧 SPECIAL OFFER: 20% OFF All Mobile Screen Repairs This Week! 
            <i class="fas fa-mobile-alt"></i>
            📱 Professional Repair Services Available 
            <i class="fas fa-tools"></i>
            💻 Free Diagnostics on All Computer Repairs 
            <i class="fas fa-laptop"></i>
            🎯 Same Day Service Available 
            <i class="fas fa-clock"></i>
            📞 Call +232 33 399 391 for Immediate Support 
            <i class="fas fa-phone"></i>
            🏆 Trusted by 1000+ Customers in Freetown 
            <i class="fas fa-star"></i>
            ⚡ Quick Turnaround Time Guaranteed 
            <i class="fas fa-bolt"></i>
            🛡️ 6 Month Warranty on All Repairs 
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h3 class="text-xl font-bold text-gray-900 mb-2">IT Services Freetown</h3>
            <p class="text-gray-700 font-medium mb-4">Connecting to chat support...</p>
            <div class="loading-dots">
                <div class="loading-dot"></div>
                <div class="loading-dot"></div>
                <div class="loading-dot"></div>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="bg-white/95 backdrop-blur-md shadow-lg sticky top-12 z-50 border-b border-white/20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-14 sm:h-16">
                <div class="flex items-center">
                    <div class="flex items-center">
                        <img src="assets/logo.png" alt="IT Services Freetown Logo" class="h-10 sm:h-12 w-auto">
                    </div>
                </div>
                <div class="hidden md:flex items-center space-x-8">
                    <a href="index.html" class="text-gray-700 hover:text-primary-950 px-3 py-2 text-sm font-medium">Home</a>
                    <a href="book-appointment.html" class="text-gray-700 hover:text-primary-950 px-3 py-2 text-sm font-medium">Book Appointment</a>
                    <a href="track-repair.html" class="text-gray-700 hover:text-primary-950 px-3 py-2 text-sm font-medium">Track Repair</a>
                    <a href="troubleshoot.html" class="text-gray-700 hover:text-primary-950 px-3 py-2 text-sm font-medium">Troubleshoot</a>
                    <a href="chat.html" class="text-primary-950 px-3 py-2 text-sm font-medium font-semibold">Chat Support</a>
                </div>
                <!-- Mobile menu button -->
                <div class="md:hidden flex items-center">
                    <button id="mobile-menu-button" class="text-gray-700 hover:text-primary-950 focus:outline-none focus:text-primary-950">
                        <i id="menu-icon" class="fas fa-bars text-xl"></i>
                        <i id="close-icon" class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile Navigation -->
        <div id="mobile-menu" class="md:hidden hidden">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-white border-t">
                <a href="index.html" class="text-gray-700 hover:text-primary-950 block px-3 py-2 text-base font-medium">Home</a>
                <a href="book-appointment.html" class="text-gray-700 hover:text-primary-950 block px-3 py-2 text-base font-medium">Book Appointment</a>
                <a href="track-repair.html" class="text-gray-700 hover:text-primary-950 block px-3 py-2 text-base font-medium">Track Repair</a>
                <a href="troubleshoot.html" class="text-gray-700 hover:text-primary-950 block px-3 py-2 text-base font-medium">Troubleshoot</a>
                <a href="chat.html" class="text-primary-950 block px-3 py-2 text-base font-medium font-semibold">Chat Support</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section with Background Slideshow -->
    <div class="hero-section">
        <div class="background-slideshow">
            <div class="slide slide-1 active"></div>
            <div class="slide slide-2"></div>
            <div class="slide slide-3"></div>
        </div>
        <div class="hero-content">
            <h1>Professional IT Services in Freetown</h1>
            <p>Expert computer and mobile repairs with real-time tracking and AI-powered support</p>
        </div>
    </div>

    <div class="min-h-screen bg-gray-50 py-12">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Chat Interface -->
                <div class="lg:col-span-2">
                    <div class="chat-container">
                        <div class="chat-header">
                            <div class="flex items-center space-x-3">
                                <div class="message-avatar bg-gradient-to-br from-blue-500 to-blue-700">
                                    <i class="fas fa-robot text-lg"></i>
                                </div>
                                <div>
                                    <h3 class="font-semibold">AI Assistant</h3>
                                    <p class="text-sm opacity-75">Always online • Responds instantly</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="text-sm opacity-75">Status:</span>
                                <div class="status-indicator status-online"></div>
                            </div>
                        </div>

                        <div class="chat-messages" id="chatMessages">
                            <div class="message ai">
                                <div class="message-avatar">
                                    <i class="fas fa-robot"></i>
                                </div>
                                <div class="message-content">
                                    <p class="text-sm mb-1"><strong>AI Assistant</strong></p>
                                    <p>Hello! I'm your AI assistant. I can help you with common tech issues, answer questions about our services, or connect you with a live technician. How can I help you today?</p>
                                </div>
                            </div>

                            <div class="quick-actions" id="quickActions">
                                <button class="quick-action" data-message="My computer won't start">Computer won't start</button>
                                <button class="quick-action" data-message="Phone battery drains fast">Battery issues</button>
                                <button class="quick-action" data-message="I need help with my repair status">Check repair status</button>
                                <button class="quick-action" data-message="I want to book an appointment">Book appointment</button>
                                <button class="quick-action" data-message="Connect me with a human agent">Talk to human</button>
                            </div>

                            <div class="typing-indicator" id="typingIndicator">
                                <div class="message-avatar">
                                    <i class="fas fa-robot"></i>
                                </div>
                                <div class="typing-dots">
                                    <div class="typing-dot"></div>
                                    <div class="typing-dot"></div>
                                    <div class="typing-dot"></div>
                                </div>
                                <span class="text-sm text-gray-500">AI is typing...</span>
                            </div>
                        </div>

                        <div class="chat-input-area">
                            <textarea
                                id="messageInput"
                                placeholder="Type your message here..."
                                class="input-field resize-none"
                                rows="2"
                                style="min-height: 40px;"
                            ></textarea>
                            <button
                                id="sendButton"
                                class="btn-primary px-4 py-2 flex items-center justify-center"
                                style="min-width: 100px;"
                            >
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Support Info -->
                <div class="space-y-6">
                    <!-- Live Agents Status -->
                    <div class="bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                            <i class="fas fa-user-headset text-primary-950 mr-2"></i>
                            Live Agents
                        </h3>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg border border-green-200">
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 bg-red-600 rounded-full flex items-center justify-center text-white font-semibold">
                                        RS
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-900">Ryan Stewart</p>
                                        <p class="text-sm text-gray-600">Senior Technician</p>
                                    </div>
                                </div>
                                <div class="status-indicator status-online"></div>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-yellow-50 rounded-lg border border-yellow-200">
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold" style="background-color: #040e40;">
                                        AP
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-900">Alison P Stewart</p>
                                        <p class="text-sm text-gray-600">Mobile Specialist</p>
                                    </div>
                                </div>
                                <div class="status-indicator status-busy"></div>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-200">
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 bg-red-500 rounded-full flex items-center justify-center text-white font-semibold">
                                        PJS
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-900">Paul Joe Stewart</p>
                                        <p class="text-sm text-gray-600">Computer Expert</p>
                                    </div>
                                </div>
                                <div class="status-indicator status-offline"></div>
                            </div>
                        </div>
                        <div class="mt-4 p-3 bg-blue-50 rounded-lg">
                            <p class="text-sm text-blue-800">
                                <i class="fas fa-info-circle mr-1"></i>
                                Average response time: <strong>2 minutes</strong>
                            </p>
                        </div>
                    </div>

                    <!-- Quick Help -->
                    <div class="bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                            <i class="fas fa-lightning-bolt text-primary-950 mr-2"></i>
                            Quick Help
                        </h3>
                        <div class="space-y-3">
                            <a href="troubleshoot.html" class="block p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                                <div class="flex items-center space-x-3">
                                    <i class="fas fa-brain" style="color: #040e40;"></i>
                                    <div>
                                        <p class="font-medium text-gray-900">AI Troubleshooting</p>
                                        <p class="text-sm text-gray-600">Get instant solutions</p>
                                    </div>
                                </div>
                            </a>
                            <a href="book-appointment.html" class="block p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                                <div class="flex items-center space-x-3">
                                    <i class="fas fa-calendar-alt text-red-600"></i>
                                    <div>
                                        <p class="font-medium text-gray-900">Book Appointment</p>
                                        <p class="text-sm text-gray-600">Schedule a repair</p>
                                    </div>
                                </div>
                            </a>
                            <a href="track-repair.html" class="block p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                                <div class="flex items-center space-x-3">
                                    <i class="fas fa-search" style="color: #040e40;"></i>
                                    <div>
                                        <p class="font-medium text-gray-900">Track Repair</p>
                                        <p class="text-sm text-gray-600">Check status</p>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>

                    <!-- Contact Info -->
                    <div class="bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                            <i class="fas fa-phone text-primary-950 mr-2"></i>
                            Contact Info
                        </h3>
                        <div class="space-y-3 text-sm">
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-phone text-green-600 w-4"></i>
                                <span>+232 33 399 391</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-envelope text-blue-600 w-4"></i>
                                <span>support@itservicesfreetown.com</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-map-marker-alt text-red-600 w-4"></i>
                                <span>1 Regent Highway, Jui Junction, Freetown</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-clock text-orange-600 w-4"></i>
                                <span>Mon-Sat: 8AM-6PM</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Mobile menu toggle will be initialized in DOMContentLoaded below

        const chatMessages = document.getElementById('chatMessages');
        const messageInput = document.getElementById('messageInput');
        const sendButton = document.getElementById('sendButton');
        const typingIndicator = document.getElementById('typingIndicator');
        const quickActions = document.getElementById('quickActions');

        let isAgentMode = false;
        let messageCount = 0;

        // AI responses based on message content
        const aiResponses = {
            'computer won\'t start': 'I can help you troubleshoot that! First, let\'s check if the power cable is securely connected. Can you confirm the power light is on? Also, try holding the power button for 10 seconds to fully shut down, then restart.',
            'phone battery drains fast': 'Battery drain can be caused by several factors. Let\'s check: 1) Go to Settings > Battery to see which apps use the most power, 2) Enable battery saver mode, 3) Reduce screen brightness, 4) Close unused background apps. Would you like me to walk you through any of these steps?',
            'repair status': 'I can help you check your repair status! Do you have your repair ticket number? It should be in the format RT-XXXXXX. You can also visit our Track Repair page for real-time updates.',
            'book appointment': 'I\'d be happy to help you book an appointment! You can either use our online booking system or I can connect you with an agent. What type of device needs repair - computer or mobile?',
            'human agent': 'I\'ll connect you with one of our live technicians right away. Please hold while I transfer you...',
            'default': 'I understand you need help with that. Let me see what I can do to assist you. Could you provide more details about the specific issue you\'re experiencing?'
        };

        // Agent responses
        const agentResponses = [
            'Hi there! I\'m Ryan from the technical support team. I\'ve reviewed your conversation with our AI assistant. How can I help you further?',
            'Thanks for the additional details. Based on what you\'ve described, I think we can resolve this quickly. Let me walk you through a few steps.',
            'That\'s a common issue we see. I have a solution that should work for you. Are you able to follow some troubleshooting steps right now?',
            'I see the problem. This typically requires a hardware check. Would you like to schedule an appointment so we can take a closer look at your device?'
        ];

        // Handle quick actions
        quickActions.addEventListener('click', (e) => {
            if (e.target.classList.contains('quick-action')) {
                const message = e.target.dataset.message;
                sendMessage(message, 'user');
            }
        });

        // Handle send button
        sendButton.addEventListener('click', () => {
            const message = messageInput.value.trim();
            if (message) {
                sendMessage(message, 'user');
                messageInput.value = '';
            }
        });

        // Handle enter key
        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendButton.click();
            }
        });

        function sendMessage(message, sender) {
            // Add user message
            addMessage(message, sender);
            
            // Hide quick actions after first message
            if (messageCount === 1) {
                quickActions.style.display = 'none';
            }
            
            // Show typing indicator
            showTypingIndicator();
            
            // Generate response
            setTimeout(async () => {
                hideTypingIndicator();
                
                if (message.toLowerCase().includes('human') || message.toLowerCase().includes('agent') || messageCount > 5) {
                    if (!isAgentMode) {
                        await requestHumanAgent();
                    } else {
                        const response = agentResponses[Math.floor(Math.random() * agentResponses.length)];
                        addMessage(response, 'agent');
                    }
                } else {
                    console.log('Getting AI response for message:', message);
                    const response = await getAIResponse(message);
                    console.log('Received response:', response);
                    addMessage(response, 'ai');
                }
            }, 1500 + Math.random() * 1000);
        }

        function addMessage(message, sender) {
            messageCount++;
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            let avatar, senderName;
            if (sender === 'user') {
                avatar = '<i class="fas fa-user"></i>';
                senderName = 'You';
            } else if (sender === 'ai') {
                avatar = '<i class="fas fa-robot"></i>';
                senderName = 'AI Assistant';
            } else if (sender === 'agent') {
                avatar = 'RS';
                senderName = 'Ryan Stewart';
            }
            
            messageDiv.innerHTML = `
                <div class="message-avatar">
                    ${avatar}
                </div>
                <div class="message-content">
                    ${sender !== 'user' ? `<p class="text-sm mb-1"><strong>${senderName}</strong></p>` : ''}
                    <p>${message}</p>
                </div>
            `;
            
            chatMessages.insertBefore(messageDiv, typingIndicator);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // AI responses - now connected to Gemini API via backend
        async function getAIResponse(message) {
            try {
                console.log('Sending message to AI:', message);
                
                const response = await fetch('/api/chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        message: message,
                        deviceType: localStorage.getItem('deviceType') || 'unknown',
                        deviceModel: localStorage.getItem('deviceModel') || '',
                        sessionId: generateSessionId()
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                console.log('API Response:', data);
                
                if (data.success && data.response) {
                    return data.response;
                } else {
                    console.warn('Unexpected API response format:', data);
                    return getFallbackResponse(message);
                }
            } catch (error) {
                console.error('Chat API Error:', error);
                console.log('Falling back to predefined responses');
                return getFallbackResponse(message);
            }
        }

        // Fallback responses for when API is not available
        function getFallbackResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            // Greeting responses
            if (lowerMessage.includes('hello') || lowerMessage.includes('hi') || lowerMessage.includes('hey')) {
                return 'Hello! Welcome to IT Services Freetown chat support. I\'m here to help with your computer or mobile device issues. What can I assist you with today?';
            }
            
            // Computer issues
            if (lowerMessage.includes('computer') || lowerMessage.includes('laptop') || lowerMessage.includes('pc')) {
                if (lowerMessage.includes('won\'t start') || lowerMessage.includes('not starting') || lowerMessage.includes('dead')) {
                    return 'Let\'s troubleshoot your computer startup issue! First, check if the power cable is securely connected and the power outlet is working. Try holding the power button for 10 seconds, then press it again. If you see any lights or hear fans, let me know!';
                }
                if (lowerMessage.includes('slow') || lowerMessage.includes('freeze') || lowerMessage.includes('hang')) {
                    return 'Slow computers can be frustrating! This could be due to: 1) Too many startup programs, 2) Low storage space, 3) Malware, or 4) Hardware issues. Try restarting your computer first. If the problem persists, I recommend bringing it to our shop for a free diagnostic.';
                }
                if (lowerMessage.includes('virus') || lowerMessage.includes('malware')) {
                    return 'Virus infections can be serious! Don\'t enter any personal information until it\'s cleaned. We offer professional virus removal services with a guarantee. Our shop is located at 1 Regent Highway, Jui Junction. Would you like to schedule an appointment?';
                }
                return 'I can help with computer issues! Whether it\'s hardware problems, software glitches, or performance issues, our technicians have experience with all major brands. What specific problem are you experiencing?';
            }
            
            // Mobile phone issues
            if (lowerMessage.includes('phone') || lowerMessage.includes('mobile') || lowerMessage.includes('cell')) {
                if (lowerMessage.includes('battery') || lowerMessage.includes('drain') || lowerMessage.includes('charge')) {
                    return 'Battery issues are common! Try these steps: 1) Close background apps, 2) Lower screen brightness, 3) Turn off location services temporarily, 4) Restart your phone. If your battery drains very quickly or won\'t charge, you might need a battery replacement. We stock original batteries for most phone models.';
                }
                if (lowerMessage.includes('screen') || lowerMessage.includes('crack') || lowerMessage.includes('broken')) {
                    return 'We specialize in screen repairs! We can fix cracked screens, display issues, and touch problems for most phone brands. We use high-quality replacement parts with a 1-month warranty. Typical repair time is 2-4 hours. Would you like to book an appointment?';
                }
                if (lowerMessage.includes('water') || lowerMessage.includes('wet') || lowerMessage.includes('liquid')) {
                    return 'Water damage needs immediate attention! Turn off your phone RIGHT NOW and don\'t try to charge it. Remove the battery if possible. Bring it to our shop ASAP - we have specialized equipment for water damage recovery. Time is critical for saving your data and device!';
                }
                return 'I can help with mobile phone repairs! We fix screens, batteries, charging ports, cameras, and more. We work on iPhones, Samsung, Tecno, Infinix, and other popular brands. What\'s wrong with your phone?';
            }
            
            // Service inquiries
            if (lowerMessage.includes('price') || lowerMessage.includes('cost') || lowerMessage.includes('how much')) {
                return 'Repair costs vary depending on the device and issue. We offer free diagnostics to give you an accurate quote. Common repairs: Phone screen replacement (Le 200,000-400,000), Computer virus removal (Le 150,000), Battery replacement (Le 100,000-250,000). Visit us for a free estimate!';
            }
            
            if (lowerMessage.includes('appointment') || lowerMessage.includes('book') || lowerMessage.includes('schedule')) {
                return 'You can book an appointment online through our website or call us at +232 33 399 391. We\'re open Monday-Saturday, 8AM-6PM. Walk-ins are welcome, but appointments get priority service. What type of repair do you need?';
            }
            
            if (lowerMessage.includes('location') || lowerMessage.includes('where') || lowerMessage.includes('address')) {
                return 'We\'re located at 1 Regent Highway, Jui Junction, Freetown. We\'re easy to find - look for our IT Services sign. Open Monday-Saturday, 8AM-6PM. You can also call us at +232 33 399 391 for directions.';
            }
            
            if (lowerMessage.includes('warranty') || lowerMessage.includes('guarantee')) {
                return 'All our repairs come with a 1-month warranty covering parts and labor. If the same issue occurs within 30 days, we\'ll fix it free of charge. We use quality replacement parts and stand behind our work!';
            }
            
            // Human agent request
            if (lowerMessage.includes('human') || lowerMessage.includes('agent') || lowerMessage.includes('person') || lowerMessage.includes('technician')) {
                return 'I\'ll connect you with one of our human technicians right away. Please hold while I transfer you to a live agent who can provide personalized assistance.';
            }
            
            // Data recovery
            if (lowerMessage.includes('data') || lowerMessage.includes('files') || lowerMessage.includes('recover') || lowerMessage.includes('lost')) {
                return 'Data recovery is one of our specialties! Whether it\'s a crashed hard drive, deleted files, or corrupted storage, we have professional tools and expertise. Success rates are highest when you stop using the device immediately. Bring it in for a free evaluation.';
            }
            
            // Default response
            return 'I\'m here to help with your IT needs! I can assist with computer repairs, mobile phone issues, troubleshooting, and booking appointments. Could you tell me more about the specific problem you\'re experiencing? If you need immediate assistance, I can also connect you with a human technician.';
        }

        // Generate unique session ID
        function generateSessionId() {
            let sessionId = localStorage.getItem('chatSessionId');
            if (!sessionId) {
                sessionId = 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                localStorage.setItem('chatSessionId', sessionId);
            }
            return sessionId;
        }

        async function requestHumanAgent() {
            try {
                const response = await fetch('/api/agents/request', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        sessionId: generateSessionId(),
                        customerEmail: localStorage.getItem('customerEmail'),
                        reason: 'Customer requested human support via chat'
                    })
                });

                const data = await response.json();
                
                if (data.success) {
                    addMessage(data.message, 'ai');
                    setTimeout(() => {
                        switchToAgent();
                    }, 2000);
                } else {
                    addMessage("I'm having trouble connecting you to an agent right now. Please try calling us at +232 33 399 391.", 'ai');
                }
            } catch (error) {
                console.error('Agent request error:', error);
                addMessage("I'm having trouble connecting you to an agent right now. Please try calling us at +232 33 399 391.", 'ai');
            }
        }

        function switchToAgent() {
            isAgentMode = true;
            
            // Update chat header
            const chatHeader = document.querySelector('.chat-header');
            chatHeader.innerHTML = `
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-red-600 rounded-full flex items-center justify-center text-white font-semibold">
                        JM
                    </div>
                    <div>
                        <h3 class="font-semibold">Ryan Stewart</h3>
                        <p class="text-sm opacity-75">Senior Technician • Online</p>
                    </div>
                </div>
                <div class="flex items-center space-x-2">
                    <span class="text-sm opacity-75">Status:</span>
                    <div class="status-indicator status-online"></div>
                </div>
            `;
            chatHeader.style.background = 'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)';
            
            // Add transfer message
            setTimeout(() => {
                addMessage('You\'ve been connected to a live technician. Please wait a moment...', 'ai');
                setTimeout(() => {
                    addMessage(agentResponses[0], 'agent');
                }, 2000);
            }, 1000);
        }

        function showTypingIndicator() {
            typingIndicator.style.display = 'flex';
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function hideTypingIndicator() {
            typingIndicator.style.display = 'none';
        }

        // Auto-resize textarea
        messageInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 120) + 'px';
        });

        // Background slideshow functionality
        function initBackgroundSlideshow() {
            const slides = document.querySelectorAll('.slide');
            let currentSlide = 0;

            function showNextSlide() {
                // Remove active class from current slide
                slides[currentSlide].classList.remove('active');
                
                // Move to next slide
                currentSlide = (currentSlide + 1) % slides.length;
                
                // Add active class to new slide
                slides[currentSlide].classList.add('active');
            }

            // Change slide every 30 seconds
            setInterval(showNextSlide, 30000);
        }

        // Loading animation
        function hideLoader() {
            const loader = document.getElementById('loadingOverlay');
            if (loader) {
                loader.classList.add('fade-out');
                setTimeout(() => loader.remove(), 500);
            }
        }

        // Initialize slideshow when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Hide loader after content is loaded
            setTimeout(hideLoader, 800);

            // Mobile menu toggle
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const menuIcon = document.getElementById('menu-icon');
            const closeIcon = document.getElementById('close-icon');

            mobileMenuButton.addEventListener('click', function() {
                const isHidden = mobileMenu.classList.contains('hidden');
                if (isHidden) {
                    mobileMenu.classList.remove('hidden');
                    menuIcon.classList.add('hide');
                    closeIcon.classList.add('show');
                } else {
                    mobileMenu.classList.add('hidden');
                    menuIcon.classList.remove('hide');
                    closeIcon.classList.remove('show');
                }
            });
            
            // Initialize background slideshow
            initBackgroundSlideshow();
        });
    </script>

    <!-- Footer -->
    <footer class="bg-primary-950 text-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                <div class="col-span-1 sm:col-span-2 lg:col-span-2">
                    <div class="flex items-center mb-4">
                        <img src="assets/logo.png" alt="IT Services Freetown Logo" class="h-10 w-auto">
                    </div>
                    <p class="text-gray-300 mb-4 max-w-md">
                        Professional computer and mobile repair services in Freetown, Sierra Leone. 
                        We provide expert repairs with real-time tracking and AI-powered support.
                    </p>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Quick Links</h3>
                    <ul class="space-y-2">
                        <li><a href="index.html" class="text-gray-300 hover:text-white">Home</a></li>
                        <li><a href="book-appointment.html" class="text-gray-300 hover:text-white">Book Appointment</a></li>
                        <li><a href="track-repair.html" class="text-gray-300 hover:text-white">Track Repair</a></li>
                        <li><a href="troubleshoot.html" class="text-gray-300 hover:text-white">AI Troubleshooting</a></li>
                        <li><a href="chat.html" class="text-gray-300 hover:text-white">Chat Support</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Contact Us</h3>
                    <div class="space-y-3">
                        <div class="flex items-center space-x-2">
                            <i class="fas fa-phone text-gray-300"></i>
                            <span class="text-gray-300">+232 33 399 391</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <i class="fas fa-envelope text-gray-300"></i>
                            <span class="text-gray-300">info@itservicesfreetown.com</span>
                        </div>
                        <div class="flex items-start space-x-2">
                            <i class="fas fa-map-marker-alt text-gray-300 mt-1"></i>
                            <span class="text-gray-300">1 Regent Highway, Jui Junction<br>Freetown, Sierra Leone</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="border-t border-primary-900 mt-8 pt-8 text-center">
                <p class="text-gray-300">© 2025 IT Services Freetown. All rights reserved.</p>
                <div class="mt-4 flex justify-center space-x-6 text-sm">
                    <button onclick="openPrivacyPolicy()" class="text-gray-400 hover:text-white">Privacy Policy</button>
                    <button onclick="openTermsConditions()" class="text-gray-400 hover:text-white">Terms & Conditions</button>
                    <button onclick="openCookieSettings()" class="text-gray-400 hover:text-white">Cookie Settings</button>
                </div>
            </div>
        </div>
    </footer>

    <!-- Privacy Policy Modal -->
    <div id="privacy-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-4xl w-full max-h-[80vh] overflow-hidden">
            <div class="flex justify-between items-center p-6 border-b">
                <h2 class="text-2xl font-bold text-gray-900">Privacy Policy</h2>
                <button onclick="closePrivacyPolicy()" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <div class="p-6 overflow-y-auto max-h-[60vh]">
                <div class="prose max-w-none">
                    <h3 class="text-lg font-semibold mb-3">Information We Collect</h3>
                    <p class="mb-4 text-gray-600">We collect information you provide directly to us, such as when you create an account, book a repair service, or contact us for support.</p>
                    
                    <h3 class="text-lg font-semibold mb-3">How We Use Your Information</h3>
                    <p class="mb-4 text-gray-600">We use the information we collect to provide, maintain, and improve our services, process appointments, and communicate with you.</p>
                    
                    <h3 class="text-lg font-semibold mb-3">Information Sharing</h3>
                    <p class="mb-4 text-gray-600">We do not sell, trade, or otherwise transfer your personal information to third parties without your consent, except as described in this policy.</p>
                    
                    <h3 class="text-lg font-semibold mb-3">Data Security</h3>
                    <p class="mb-4 text-gray-600">We implement appropriate security measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction.</p>
                    
                    <h3 class="text-lg font-semibold mb-3">Contact Us</h3>
                    <p class="text-gray-600">If you have any questions about this Privacy Policy, please contact us at info@itservicesfreetown.com</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Terms & Conditions Modal -->
    <div id="terms-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-4xl w-full max-h-[80vh] overflow-hidden">
            <div class="flex justify-between items-center p-6 border-b">
                <h2 class="text-2xl font-bold text-gray-900">Terms & Conditions</h2>
                <button onclick="closeTermsConditions()" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <div class="p-6 overflow-y-auto max-h-[60vh]">
                <div class="prose max-w-none">
                    <h3 class="text-lg font-semibold mb-3">Service Terms</h3>
                    <p class="mb-4 text-gray-600">By using our services, you agree to these terms. Our repair services are provided subject to availability and technical feasibility.</p>
                    
                    <h3 class="text-lg font-semibold mb-3">Warranties</h3>
                    <p class="mb-4 text-gray-600">We provide a 90-day warranty on all repairs using genuine parts. Warranty does not cover physical damage or water damage after repair.</p>
                    
                    <h3 class="text-lg font-semibold mb-3">Liability</h3>
                    <p class="mb-4 text-gray-600">Our liability is limited to the cost of the repair service. We are not responsible for data loss during repair process.</p>
                    
                    <h3 class="text-lg font-semibold mb-3">Payment Terms</h3>
                    <p class="mb-4 text-gray-600">Payment is due upon completion of service. We accept cash, card, and mobile money payments.</p>
                    
                    <h3 class="text-lg font-semibold mb-3">Cancellation Policy</h3>
                    <p class="text-gray-600">Appointments can be cancelled up to 2 hours before scheduled time without penalty.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Cookie Settings Modal -->
    <div id="cookie-settings-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-2xl w-full">
            <div class="flex justify-between items-center p-6 border-b">
                <h2 class="text-2xl font-bold text-gray-900">Cookie Settings</h2>
                <button onclick="closeCookieSettings()" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <div class="p-6">
                <div class="space-y-6">
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <h3 class="font-semibold text-gray-900">Essential Cookies</h3>
                            <p class="text-sm text-gray-600 mt-1">Required for basic site functionality</p>
                        </div>
                        <input type="checkbox" checked disabled class="mt-1 h-5 w-5 text-primary-600">
                    </div>
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <h3 class="font-semibold text-gray-900">Analytics Cookies</h3>
                            <p class="text-sm text-gray-600 mt-1">Help us understand how you use our site</p>
                        </div>
                        <input type="checkbox" id="analytics-cookies" class="mt-1 h-5 w-5 text-primary-600">
                    </div>
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <h3 class="font-semibold text-gray-900">Marketing Cookies</h3>
                            <p class="text-sm text-gray-600 mt-1">Used to show you relevant advertisements</p>
                        </div>
                        <input type="checkbox" id="marketing-cookies" class="mt-1 h-5 w-5 text-primary-600">
                    </div>
                </div>
                <div class="flex space-x-3 mt-8">
                    <button onclick="savePreferences()" class="flex-1 bg-primary-600 text-white py-3 rounded-lg font-medium hover:bg-primary-700 transition-colors">Save Preferences</button>
                    <button onclick="acceptAllCookies()" class="flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-200 transition-colors">Accept All</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Legal modal functions
        function openPrivacyPolicy() {
            document.getElementById('privacy-modal').classList.remove('hidden');
        }

        function closePrivacyPolicy() {
            document.getElementById('privacy-modal').classList.add('hidden');
        }

        function openTermsConditions() {
            document.getElementById('terms-modal').classList.remove('hidden');
        }

        function closeTermsConditions() {
            document.getElementById('terms-modal').classList.add('hidden');
        }

        function openCookieSettings() {
            document.getElementById('cookie-settings-modal').classList.remove('hidden');
            document.getElementById('analytics-cookies').checked = localStorage.getItem('analyticsCookies') === 'true';
            document.getElementById('marketing-cookies').checked = localStorage.getItem('marketingCookies') === 'true';
        }

        function closeCookieSettings() {
            document.getElementById('cookie-settings-modal').classList.add('hidden');
        }

        function savePreferences() {
            const analytics = document.getElementById('analytics-cookies').checked;
            const marketing = document.getElementById('marketing-cookies').checked;
            
            localStorage.setItem('cookiesAccepted', 'true');
            localStorage.setItem('analyticsCookies', analytics.toString());
            localStorage.setItem('marketingCookies', marketing.toString());
            
            closeCookieSettings();
        }

        function acceptAllCookies() {
            localStorage.setItem('cookiesAccepted', 'true');
            localStorage.setItem('analyticsCookies', 'true');
            localStorage.setItem('marketingCookies', 'true');
            closeCookieSettings();
        }

        // Close modals when clicking outside
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('bg-black')) {
                if (e.target.closest('#privacy-modal')) closePrivacyPolicy();
                if (e.target.closest('#terms-modal')) closeTermsConditions();
                if (e.target.closest('#cookie-settings-modal')) closeCookieSettings();
            }
        });
    </script>
</body>
</html>
