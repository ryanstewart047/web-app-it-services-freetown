# Railway Environment Variables Setup Guide

## Step-by-Step Setup Instructions

### 1. Access Railway Dashboard
1. Go to [railway.app](https://railway.app)
2. Sign in to your account
3. Navigate to your **IT Services Freetown** project

### 2. Add Environment Variables
Click on your project → Go to **Variables** tab → Click **+ New Variable**

Add these environment variables one by one:

#### Database Configuration
- **Variable Name**: `DATABASE_URL`
- **Value**: Leave empty - Railway will auto-generate this when you add a PostgreSQL database
- **Note**: Add PostgreSQL service first if not already added

#### Email Configuration (Gmail SMTP)
- **Variable Name**: `SMTP_HOST`
- **Value**: `smtp.gmail.com`

- **Variable Name**: `SMTP_PORT`
- **Value**: `587`

- **Variable Name**: `SMTP_USER`
- **Value**: `itservicesfreetown@gmail.com`

- **Variable Name**: `SMTP_PASS`
- **Value**: `your-gmail-app-password`
- **⚠️ IMPORTANT**: Replace with your actual Gmail App Password (see setup below)

- **Variable Name**: `FROM_EMAIL`
- **Value**: `support@itservicesfreetown.com`

#### AI Configuration
- **Variable Name**: `GEMINI_API_KEY`
- **Value**: `AIzaSyDinSiRr6Gya3Q3Gy5f-Mx5otdOR7qg9q4`

#### Next.js Configuration
- **Variable Name**: `NEXTAUTH_URL`
- **Value**: `https://your-app-name.up.railway.app`
- **Note**: Replace with your actual Railway domain

- **Variable Name**: `NEXTAUTH_SECRET`
- **Value**: Generate a random secret (see below)

#### Socket.IO Configuration
- **Variable Name**: `SOCKET_IO_SECRET`
- **Value**: Generate a random secret (see below)

### 3. Generate Secure Secrets

For `NEXTAUTH_SECRET` and `SOCKET_IO_SECRET`, use one of these methods:

**Option A - Online Generator:**
Visit: https://generate-secret.vercel.app/32

**Option B - Command Line:**
```bash
openssl rand -base64 32
```

**Option C - Node.js:**
```javascript
require('crypto').randomBytes(32).toString('base64')
```

### 4. Gmail App Password Setup

1. **Enable 2-Factor Authentication** on your Gmail account
2. Go to **Google Account Settings** → **Security**
3. Under "Signing in to Google", select **App passwords**
4. Select **Mail** and **Other (Custom name)**
5. Enter "IT Services Freetown Railway"
6. Copy the generated 16-character password
7. Use this password for `SMTP_PASS` variable

### 5. Add PostgreSQL Database

1. In Railway dashboard, click **+ New Service**
2. Select **Database** → **PostgreSQL**
3. Wait for deployment
4. The `DATABASE_URL` will be automatically generated

### 6. Deploy with Environment Variables

After adding all variables:
1. Go to **Deployments** tab
2. Click **Deploy** or trigger redeploy
3. Monitor deployment logs for any errors

### 7. Test Deployment

Once deployed, test these features:
- ✅ Appointment booking with email confirmation
- ✅ Repair tracking
- ✅ AI troubleshooting
- ✅ Real-time chat

## Environment Variables Checklist

- [ ] `DATABASE_URL` (auto-generated by PostgreSQL service)
- [ ] `SMTP_HOST` = `smtp.gmail.com`
- [ ] `SMTP_PORT` = `587`
- [ ] `SMTP_USER` = `itservicesfreetown@gmail.com`
- [ ] `SMTP_PASS` = your Gmail App Password
- [ ] `FROM_EMAIL` = `support@itservicesfreetown.com`
- [ ] `GEMINI_API_KEY` = your Gemini API key
- [ ] `NEXTAUTH_URL` = your Railway domain
- [ ] `NEXTAUTH_SECRET` = generated secret
- [ ] `SOCKET_IO_SECRET` = generated secret

## Troubleshooting

### Common Issues:

1. **Database Connection Failed**
   - Ensure PostgreSQL service is running
   - Check if `DATABASE_URL` is properly set

2. **Email Not Sending**
   - Verify Gmail App Password is correct
   - Check 2FA is enabled on Gmail
   - Ensure SMTP settings are correct

3. **Build Failures**
   - Check deployment logs
   - Ensure all required environment variables are set
   - Verify Prisma schema is compatible with PostgreSQL

### Deployment Logs

To check deployment status:
1. Go to **Deployments** tab
2. Click on latest deployment
3. View logs for errors or warnings

## Production Domain

Your app will be available at:
`https://[your-app-name].up.railway.app`

Replace `[your-app-name]` with your actual Railway project name.
